<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />

	<script src="https://cdn.plot.ly/plotly-2.12.1.min.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

	<script src="https://d3js.org/d3.v7.min.js"></script>

	<!-- Step 1 - Include the fusioncharts core library -->
    <script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.js"></script>
    <!-- Step 2 - Include the fusion theme -->
    <script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/themes/fusioncharts.theme.fusion.js"></script>


	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Characters in Absalom, Absalom!</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="style2.css" />
	<!-- CSS only -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
	<style>
		html, body {
			background-color: #222831;
		}
		#scrolly {
			position: relative;
			display: -webkit-box;
			display: -ms-flexbox;
			display: flex;
			background-color: #f3f3f3;
			padding: 1rem;
		}

		#scrolly>* {
			-webkit-box-flex: 1;
			-ms-flex: 1;
			flex: 1;
		}

		article {
			position: relative;
			padding: 0 1rem;
			max-width: 20rem;
		}

		figure {
			position: -webkit-sticky;
			position: sticky;
			height: 600px;
			width: auto;
			margin: 0;
			-webkit-transform: translate3d(0, 0, 0);
			-moz-transform: translate3d(0, 0, 0);
			transform: translate3d(0, 0, 0);
			/* background-color: #EEE; */
			z-index: 0;
		}

		figure p {
			text-align: center;
			padding: 1rem;
			position: absolute;
			top: 50%;
			left: 50%;
			-moz-transform: translate(-50%, -50%);
			-webkit-transform: translate(-50%, -50%);
			transform: translate(-50%, -50%);
			font-size: 8rem;
			font-weight: 900;
			color: #fff;
		}

		.step {
			margin: 0 auto 2rem auto;
			padding: 7rem 2rem;
			background-color: #222831;
			color: #2c3440;
		}

		.step:last-child {
			margin-bottom: 0;
		}

		.step.is-active {
			border-left: solid #EEE 12px;
			background-color: #B55400;
			color: #EEE;
		}

		.step p {
			text-align: center;
			padding: 1rem;
			text-align: left;
			font-size: 1.2rem;
		}
	</style>
</head>

<body>
	<main>
		<header class="sticky-top">
			<nav class="navbar navbar-expand-lg navbar-dark">
			  <div class="container-fluid">
				<em><a style = "color: #B55400;"class="navbar-brand" href="home.html">Absalom, Absalom!</a></em>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
				  <span class="navbar-toggler-icon"></span>
				</button>
			
				<div class="collapse navbar-collapse" id="navbarColor02">
				  <ul class="navbar-nav me-auto">
					<li class="nav-item">
					  <a class="nav-link" href="characters.html">Characters</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link" href="events.html">Events</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link" href="language.html">Language</a>
					</li>
				  </ul>
				</div>
			  </div>
			</nav>
			</header>
		<section id="intro">
			<div style = "background-color:#B55400">
				<h2 class = "title" style = "color: #222831; padding-top: 6%;">Digital Supplement:</h2>
				<em><h1 class = "title" style = "color: #FFF;">Absalom, Absalom!</h1></em>
				<em><h1 class = "title" style = "color: #222831;">and The Digital Humanities</h1></em>
				<p class = "title-p-text" style = "color: #13171c;">
				  This interactive essay acts as a supplement to the long-form essay available in the Norton Critical Edition of Absalom, Absalom!. It includes visualizations that are not possible to represent in print, and also functions as a standalone essay that explores Absalom, Absalom! along three different axes: Characters, Events, and Language.
				</p>
			  </div>
			  <div class = "notebook">
				<h1 style = "text-align: center; padding: 0; color: #EEE;">Characters</h1>
				<p class = "notebook" style = "color:#EEE;">
				The Digital Yoknapatawpha database contains every character who appears in Faulkner’s Yoknapatawpha fictions.
				Each character has a set of attribute information, including their race, class, gender, number, rank, and vitality.
				With this information, we can make a literary demography of the composition of the entire character population.
				One of the most salient pieces of demographic information in Absalom, Absalom! is race.
				</p>
				<div class = "quote">
				  <blockquote class="blockquote">
					<p class="mb-0">As a reader you have been forced to hunt for a drop of black blood that means everything and nothing.
					  <br> 
					  The insanity of racism.</p>
				  </blockquote>
				  <figcaption class="blockquote-footer"><cite title="Source Title">Toni Morrison, <em>Conversations</em></cite>
				  </figcaption>
				</div>
				<div class = "divider-h" style ="background-color: #222831;height: 40px;"></div>
				<p class = "notebook" style = "padding-bottom: 0; margin-bottom: auto;">There are 194 unique characters in Absalom, Absalom!. The overwhelming majority of these characters are White.</p>
				<iframe src='https://flo.uri.sh/visualisation/10249127/embed' title='Interactive or visual content' class='flourish-embed-iframe' frameborder='0' scrolling='no' style='width:100%;height:600px;' sandbox='allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation'></iframe><div style='width:100%!;margin-top:4px!important;text-align:right!important;'><a class='flourish-credit' href='https://public.flourish.studio/visualisation/10249127/?utm_source=embed&utm_campaign=visualisation/10249127' target='_top' style='text-decoration:none!important'></a></div>				<p class = "notebook">Simply counting the total number of characters in a text does not account for the number of times they occur in the text.
					<br>
					Statistically speaking, there is only one Moor in Shakespeare’s Othello, but as he appears in nearly every scene he is one of the most present characters.
					<br>
					We can weight for character presence by calculating how often they occur in an event.</p>					
				</section>

		<section id="scrolly" style = "background-color: #222831;">
			<article>
				<div class="step" data-step="1">
					<p class = "scroll-text">
						Weighting by narrative presence actually underscores the presence of White characters more.
					</p>
				</div>
				<div class="step" data-step="2">
					<p class = "scroll-text">
						Weighting by narrative presence actually underscores the presence of White characters more.
					</p>
				</div>
				<div class="step" data-step="3">
					<p class = "scroll-text">
						Meanwhile, the number of Mixed Ancestry characters increases.					</p>
				</div>
				<div class="step" data-step="4">
					<p class = "scroll-text">
						But only because Black characters are less present.
					</p>
				</div>
			</article>
			<figure>
					<canvas id="myChart"></canvas>
				<!-- <div id = "tester" style = "height:300px"></div> -->
			</figure>

		</section>
		<div class = "divider-h" style ="background-color: #222831;height: 50px;"></div>
		<div class = "notebook">
			<p class = "notebook">
				The data suggest that while Absalom, Absalom! is concerned with the ‘color line’, it is decidedly from a White perspective. <br><br>
				Race and racial passing is only conceived in how it might trouble Whiteness and not how it might affect the Black community.
	  </p>		</div>
		<div class = "notebook">
			  <p class = "notebook">
		  It is clear from reading Absalom, Absalom! that the novel is about Charles Bon’s potential transgression across the ‘color line.’ The data reveal that the novel attends to this issue from a predominantly White perspective, and at the exclusion of all other non-white characters.
		  The various narrators only really care about racial passing if it threatens upper class white femininity. <br><br><br>
		  As such, they naturalize racial difference, and also circumscribe the boundaries of gender, sexuality, and class.
		  In the highly fraught social circumstances of the pre-Civil Rights South, there is no way to separate race, class, gender, and sexuality.<br><br><br>
		  The data suggest that while Absalom, Absalom! is concerned with the ‘color line’, it is decidedly from a White perspective.
		  Race and racial passing is only conceived in how it might trouble Whiteness and not how it might affect the Black community.

		</p>
		<!-- <div id="main" style="width: 600px;height:400px;"></div> -->	  
		<!-- <div>
			<canvas id="myChart"></canvas>
		  </div> -->
		  
		  <!-- Footer -->
		  <!-- Remove the container if you want to extend the Footer to full width. -->
		  <div class="container my-5">
		  
			<footer class="text-center text-white" style="background-color: #f1f1f1;">
		  
			</div>
			<!-- Grid container -->
		  
			<!-- Copyright -->
			<div class="text-center text-light p-3" style="background-color: rgba(0, 0, 0, 0.2);">
			  © 2022 Copyright:
			  <a class="text-light" href="https://github.com/joostburgers">Johannes Burgers</a>
			</div>
			<!-- Copyright -->
		  </footer>
			
		  </div>
		  
	</main>

	<!-- <div class='debug'></div> -->
	<script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
	<script src="../scrollama.min.js"></script>
	<script>
		// using d3 for convenience
		var main = d3.select("main");
		var scrolly = main.select("#scrolly");
		var figure = scrolly.select("figure");
		var article = scrolly.select("article");
		var step = article.selectAll(".step");

		// initialize the scrollama
		var scroller = scrollama();

		// generic window resize listener event
		function handleResize() {
			//TRYING CHARTS JS W ANIMATION - UPDATE: IT WORKS! 00:14, 05/07
			// 1. update height of step elements
			var stepH = Math.floor(window.innerHeight * 0.75);
			step.style("height", stepH + "px");

			var figureHeight = window.innerHeight / 2;
			var figureMarginTop = (window.innerHeight - figureHeight) / 2;

			figure
				.style("height", figureHeight + "px")
				.style("top", figureMarginTop + "px");

			// 3. tell scrollama to update new element dimensions
			scroller.resize();
		}

		// scrollama event handlers
		function handleStepEnter(response) {
			
			step.classed("is-active", function (d, i) {
				return i === response.index;
			});

			
			// document.getElementById("stepcount").innerHTML=response.index;g
			console.log(response.index)
			if(response.index==1){
    		myChart.data.datasets[0].data = [12, 19, 300, 5, 2, 3]
    		myChart.update()}

			// WORKING PLOTLY JS CODE W/O ANIMATION

			// var layout = {
  			// height: 400,
  			// width: 500,
			// paper_bgcolor:'rgba(0,0,0,0)',
    		// plot_bgcolor:'rgba(0,0,0,0)'
			// };

			// let data = [{
  			// values: [19, 26, 55],
  			// labels: ['Residential', 'Non-Residential', 'Utility'],
  			// type: 'pie'}];
			// if(response.index == 1)
			// {
			// 	data = [{
  			// 	values: [25, 12, 63],
  			// 	labels: ['Residential', 'Non-Residential', 'Utility'],
  			// 	type: 'pie'}];
			// }

			// Plotly.newPlot('myDiv', data, layout);

			// END OF PLOTLY

			// ECHARTS JS TOO SLOW
			
			
		}
		

		function setupStickyfill() {
			d3.selectAll(".sticky").each(function () {
				Stickyfill.add(this);
			});
		}

		function init() {
			setupStickyfill();

			// 1. force a resize on load to ensure proper dimensions are sent to scrollama
			handleResize();

			// 2. setup the scroller passing options
			// 		this will also initialize trigger observations
			// 3. bind scrollama event handlers (this can be chained like below)
			scroller
				.setup({
					step: "#scrolly article .step",
					offset: 0.33,
					debug: false
				})
				.onStepEnter(handleStepEnter);
		}

		// kick things off
		init();
	</script>

	<script>
		const ctx = document.getElementById('myChart').getContext('2d');
const myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
        datasets: [{
            label: '# of Votes',
            data: [12, 19, 3, 5, 2, 3],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
	</script>
	<!-- JavaScript Bundle with Popper -->
<script src="https://public.flourish.studio/resources/embed.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
</body>

</html>