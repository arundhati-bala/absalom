<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Characters in Absalom, Absalom!</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<!-- JS Packages -->
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-treemap@0.2.3"></script>

	<!-- Stylesheets -->
	<link rel="stylesheet" href="style.css" />
	<link rel="stylesheet" href="scroll.css" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
	<style>
		html, body {
			background-color: #222831;
		}
	</style>
</head>

<body>
	<main>
		<header class="sticky-top">
			<nav class="navbar navbar-expand-lg navbar-dark">
			  <div class="container-fluid">
				<em><a style = "color: #B55400;"class="navbar-brand" href="home.html">Absalom, Absalom!</a></em>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
				  <span class="navbar-toggler-icon"></span>
				</button>
			
				<div class="collapse navbar-collapse" id="navbarColor02">
				  <ul class="navbar-nav me-auto">
					<li class="nav-item">
					  <a class="nav-link" href="characters.html">Characters</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link" href="events.html">Events</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link" href="language.html">Language</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="locations.html">Locations</a>
					  </li>
				  </ul>
				</div>
			  </div>
			</nav>
			</header>
			<!-- Title Slide BEGINS-->
		<section id="intro">
			<div style = "background-color:#B55400">
				<h2 class = "title" style = "color: #222831; padding-top: 6%;">Digital Supplement:</h2>
				<em><h1 class = "title" style = "color: #FFF;">Absalom, Absalom!</h1></em>
				<em><h1 class = "title" style = "color: #222831;">and The Digital Humanities</h1></em>
				<p class = "title-p-text" style = "color: #13171c;">
					This interactive essay was created using data from the <a style = "color: #13171c;"href="http://faulkner.iath.virginia.edu/">Digital Yoknapatawpha</a> Database. It serves as a supplement to the long-form essay available in the Norton Critical Edition of Absalom, Absalom!. It includes visualizations that are not possible to represent in print, and also functions as a standalone essay that explores Absalom, Absalom! along three different axes: Characters, Events, Language, and Locations.				</p>
			  </div>
			<!-- Title Slide ENDS-->

			<!-- Pre Scroll Text BEGINS-->
			  <div class = "notebook">
				<h1 style = "text-align: center; padding: 0; color: #EEE;">Events</h1>
				<p class = "notebook" style = "color:#EEE;">
					Absalom, Absalom! resists summary. It is told from multiple, contradictory perspectives that each re-tell the same set of historical events: Thomas Sutpen arrives in Jefferson and starts a family with Ellen Coldfield. He has a son, Henry, and a daughter, Judith. Judith falls in love with Henry’s friend from college Charles Bon. On the day Judith and Charles are supposed to marry, Henry kills him and disappears.
					<br><br><br>
					No one knows why, but everyone has a theory.
				</p>
						<p class = "notebook" style = "color:#EEE;">
						Faulkner was once asked if any one of the characters has the “right view.”</p>
						<div class = "quote">
				  	<blockquote class="blockquote">
					<p class="mb-0">In Absalom, Absalom! is any one of the people who talk about Sutpen have the right view, or is it more or less a case of thirteen ways of looking at a blackbird with none of them [getting it?] right?</p>
				  </blockquote>
				  <figcaption class="blockquote-footer"><cite title="Source Title">Faulkner, <em>May 8th, Virginia</em></cite>
				  </figcaption>
				  </div>
				  <p class = "notebook" style = "color:#EEE;">
					Though the plot can be very confusing, it is clear from Faulkner’s notes that he had an underlying structure.
					<br><br><br>
					This underlying structure is sometimes referred to as the chronology or story.	</p>
					<p class = "notebook" style = "color:#EEE;">
						Often used interchangeable, story and plot describe two different aspects of a narrative.
					</p>
					<div class="row">
						<div class="col-md" style = "background-color:#B55400; margin:5px; padding:10px">
							<h2>Plot</h2>
							<p>The order of events in which they are told to the reader.</p>
						</div>
						<div class="col-md" style = "background-color:#B55400; margin:5px; padding:10px;">
							<h2>Story/Chronology</h2>
							<p>The order of events as they actually occur.</p>
						</div>
				  </div>
				<div class = "divider-h" style ="background-color: #222831;height: 40px;"></div>
				<div class = "container-fluid">
				<video width= "100%" controls>
						<source src="faulkner_blackbird.mp4" type="video/mp4">
					</video>
				</div>										
				</section>
				<!-- Pre Scroll Text ENDS-->


				<!-- Scroll Text BEGINS -->
		<section id="scrolly" style = "background-color: #222831;">
			<article>
				<div class="step" data-step="1">
					<p class = "scroll-text">
						Faulkner does not tell us the events in the order they occur (story). Instead, he reorganizes them into a non-linear order (plot).

						We can see this distinction with his delayed revelations about Sutpen’s life.					</p>
				</div>
				<div class="step" data-step="2">
					<p class = "scroll-text">
						We can take the plot and chronology data and put them on a chart to show the structure of the narrative.

						Chronology is placed on the y-axis, and plot is placed on the x-axis.
						
						Events that are chronologically earlier are lower down, while later events are higher up.					</p>
				</div>
				<div class="step" data-step="3">
					<p class = "scroll-text">
						Following the order of events as Quentin discovers them, we learn several important details about him out of order:
						<br><br>
						<strong>Chapter 1:</strong> Sutpen arrives in Jefferson
						<br>
						<strong> Chapter 6:</strong> Sutpen is killed by Jones
						<br>
						<strong>Chapter 7:</strong> Sutpen is born in Virginia					</p>
				</div>
				<div class="step" data-step="4">
					<p class = "scroll-text">
						These should be re-sorted to tell the story.
						<br><br>
						<strong>Chapter 7:</strong> Sutpen is born in Virginia
						<br>
						<strong>Chapter 1:</strong> Sutpen arrives in Jefferson
						<br>
						<strong> Chapter 6:</strong> Sutpen is killed by Jones				</div>
			</article>
			<figure> 
				<!-- Scroll Chart BEGINS -->
				<canvas id="scrollychart" style = "height: 200px;"></canvas>
				<!-- Scroll Chart ENDS -->
			</figure>
		</section>
		<div class = "divider-h" style ="background-color: #222831;height: 50px;"></div>
		<div class = "notebook">
			<p class = "notebook">
				Digital Yoknapatawpha has broken down the novel into 644 individual events. <br>
				An event is any time there is one or more characters at one location for a discrete period of time.<br>
				Each of the 644 events in the novel was also assigned a number that indicates its order in the plot and in the story/chronology.<br>
	  		</p>
			  <p class = "notebook">
		  The overlapping and disjointed versions of events capture Quentin’s lived experience of exploring the past. This is not a neat linear chronology told by one authority in a history book, but the collective story of multiple voices who have shaped and reshaped the events to match their version of the truth. The tellers cannot be separated from their tales. It forces us to wonder if any version of the past can ever be true, or if it is simply another story we tell ourselves.
		</p>
		</div>
		</div>

		<div id = "chart"></div>

		<!-- Scroll Text ENDS -->
		  <!-- Footer -->
		  <!-- Remove the container if you want to extend the Footer to full width. -->
		  <div class="container my-5" style = "color: #B55400;">
		  
			<footer class="text-center text-white" style="background-color: #f1f1f1;">
		  
			</div>
			<!-- Grid container -->
		  
			<!-- Copyright -->
			<div class="text-center text-light p-3" style="background-color: rgba(0, 0, 0, 0.2);">
			  © 2022 Copyright:
			  <a class="text-light" href="https://github.com/joostburgers">Johannes Burgers</a>
			</div>
			<!-- Copyright -->
		  </footer>
			
		  </div>
		  
	</main>
	<!-- Scroll Packages BEGIN -->
	<script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
	<script src="../scrollama.min.js"></script>
	<script src = "charts.js"></script>

	<!-- Scroll Packages END -->

	<script>
		var main = d3.select("main");
		var scrolly = main.select("#scrolly");
		var figure = scrolly.select("figure");
		var article = scrolly.select("article");
		var step = article.selectAll(".step");

		// initialize the scrollama
		var scroller = scrollama();

		// generic window resize listener event
		function handleResize() {
			// update height of step elements
			var stepH = Math.floor(window.innerHeight * 0.75);
			step.style("height", stepH + "px");

			var figureHeight = window.innerHeight / 1.4;
			var figureMarginTop = (window.innerHeight - figureHeight) / 2;

			figure
				.style("height", figureHeight + "px")
				.style("top", figureMarginTop + "px");

			scroller.resize();

}

		// scrollama event handlers
		function handleStepEnter(response) {
			console.log(response.index);
			// response = { element, direction, index }


			step.classed("is-active", function (d, i) {
				return i === response.index;
			});

			// // update chart based on step
			// figure.select("p").text(response.index + 1);
			//Probably not the best place to store these steps. Might want to tuck them into a file with chart definitions later.
			if(response.index==1){
    		scrollychart.data.datasets[0].backgroundColor = "rgba(181, 84, 0, 0.7)"
    		scrollychart.update()}
			if(response.index==2){
			scrollychart.data.datasets[0].backgroundColor = "rgba(181, 84, 0, 0.7)"
    		scrollychart.update()}
			if(response.index==3){
			scrollychart.data.datasets[0].backgroundColor = "rgba(181, 84, 0, 0.7)"
    		scrollychart.update()}

  			var observer = new IntersectionObserver(function(entries) {
			if(entries[0]['isIntersecting'] === true) {
				racechart.data.datasets[0].data = ["invisible graph"]
				racechart.update()
				console.log("updating map")
			}
			else {
				racechart.data.datasets[0].label = "visible graph"
				racechart.update()
				console.log("not updating map")
			}
			}, { threshold: [0, 0.6, 1] });

			observer.observe(document.querySelector("#racechart"));
		}

		function setupStickyfill() {
			d3.selectAll(".sticky").each(function () {
				Stickyfill.add(this);
			});
		}

		function init() {
			setupStickyfill();

			// 1. force a resize on load to ensure proper dimensions are sent to scrollama
			handleResize();

			// 2. setup the scroller passing options
			// 		this will also initialize trigger observations
			// 3. bind scrollama event handlers (this can be chained like below)
			scroller
				.setup({
					step: "#scrolly article .step",
					offset: 0.33,
					debug: false
				})
				.onStepEnter(handleStepEnter);
		}

		// kick things off
		init();
	</script>
	<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
<script>
</script>
</body>


</html>